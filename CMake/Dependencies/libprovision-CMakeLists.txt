cmake_minimum_required(VERSION 2.8)

project(libprovision-download NONE)

include(ExternalProject)

ExternalProject_Add(project_libprovision
    GIT_REPOSITORY    https://github.com/aws/aws-iot-device-sdk-embedded-C.git
    GIT_TAG           80491387dcd45576df710daf1db1ffb9d7331890
    PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/build
    CMAKE_ARGS        
	  -DCMAKE_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
	  -DOPEN_SRC_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
	  -DCMAKE_C_FLAGS=${CMAKE_C_FLAGS}
	  -DCSDK_HEADER_INSTALL_PATH=${OPEN_SRC_INSTALL_PREFIX}/include
	  -DCSDK_LIB_INSTALL_PATH=${OPEN_SRC_INSTALL_PREFIX}/lib
	  -DBUILD_DEMOS=OFF
    BUILD_ALWAYS      TRUE
    TEST_COMMAND      ""
)

